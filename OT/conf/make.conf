# author: Martin Folger (M.Folger@roe.ac.uk)

###################################################################
#                 JDK SETTINGS                                    #
###################################################################


# Set to a jdk directory (e.g. /usr/java1.3) if a java installation other than the one in your path is to
# be used. If you do not specify a JAVA_ROOT then make sure you have javac, jar and javadoc in your path.
JAVA_ROOT           =

ifeq ($(JAVA_ROOT),)
JAVAC		    = $(shell which javac)
JAVADOC		    = $(shell which javadoc)
JAR                 = $(shell which jar)
else
JAVAC		    = $(JAVA_ROOT)/bin/javac
JAVADOC		    = $(JAVA_ROOT)/bin/javadoc
JAR                 = $(JAVA_ROOT)/bin/jar
endif

# Compiler flags (javac)
# Optional flags like -g or -deprecation
JFLAGS		    = -source 1.4


###################################################################
#                 MAKE SETTINGS                                   #
###################################################################

# By default this is the parent directory of CLASSES_DIR, JAR_DIR and DOC_DIR
LOCAL_INSTALL_ROOT  = ../install

# Where class files are placed by "gmake"
# Be careful when changing this directory. It will be completely removed by "gmake clean".
CLASSES_DIR	    = $(LOCAL_INSTALL_ROOT)/classes

# Where class files are placed by "gmake"
BIN_DIR	            = $(LOCAL_INSTALL_ROOT)/bin

# Where the jar file is placed by "gmake jar"
# Be careful when changing this directory. It will be completely removed by "gmake clean".
JAR_DIR             = $(LOCAL_INSTALL_ROOT)/lib

# Where the API docs are palced by "gmake doc"
# Be careful when changing this directory. It will be completely removed by "gmake clean".
DOC_DIR             = $(LOCAL_INSTALL_ROOT)/html/api

# List of telescopes currently supported by the OT
TELESCOPE_LIST = ukirt jcmt

###################################################################
#                 INSTALL SETTINGS                                #
###################################################################


# Set INSTALL_ROOT to a directory where you want the OT to be installed before calling "gmake install"
# or call "gmake INSTALL_ROOT=my_install_directory install".
INSTALL_ROOT        = 


###################################################################
#            External jar files                                   #
###################################################################

# Locations relative to orac3/OT/src

# The jar files in OMP and EDFREQ are not actually needed during the compilation of
# the java code in OT. They are only needed to run the OT code.
# But currently no distinction is made between EXTERNAL_COMPILE_JAR_FILES and
# EXTERNAL_RUNTIME_JAR_FILES in the make.conf file.
EXTERNAL_JAR_DIRS   = ../tools \
                      ../../ORAC/tools \
                      ../../OMP/tools \
                      ../../EDFREQ/tools

EXTERNAL_JAR_FILES  = $(foreach jarDir,$(EXTERNAL_JAR_DIRS),$(shell ls $(jarDir)/*.jar))

# This file contains Main-Class and Class-Path information that are used when the OT is run
# using the -jar flag.
MANIFEST            = ../conf/ot_manifest

###################################################################
#                 CLASSPATH SETTINGS                              #
###################################################################

# Note that the classpaths are now composed of relative paths because using absolute paths the
# class path can become to long ("word too long" problem on Solaris)

# Contains locally installed classes directories and external jar files in orac3 relative to OT/install/bin.
LOCAL_INSTALL_CLASSPATH = ../../install/classes:../../../GEMINI/install/classes:../../../ORAC/install/classes:../../../ODB/install/classes:../../../OMP/install/classes:../../../EDFREQ/install/classes:../../../EDFREQ/install/cfg:$(shell echo $(EXTERNAL_JAR_FILES) | sed -e 's/ \.\.\//:\.\.\/\.\.\//g')

# Contains locally installed classes directories and external jar files in orac3 relative to OT/src.
COMPILE_CLASSPATH       = ../install/classes:../../GEMINI/install/classes:../../ORAC/install/classes:../../ODB/install/classes:../../OMP/install/classes:../../EDFREQ/install/classes:$(shell echo $(EXTERNAL_JAR_FILES) | sed -e 's/ /:/g')

# contains jar files of orac3 modules GEMINI, ORAC, ODB, OMP and OT as well as external jar files in orac3 relative to
# INSTALL_ROOT/bin.
INSTALL_CLASSPATH       = ../lib/gemini.jar:../lib/orac.jar:../lib/odb.jar:../lib/omp.jar:../lib/edfreq.jar:../lib/ot.jar:../lib/orac.jar:$(shell echo $(foreach externalJarFile,$(EXTERNAL_JAR_FILES),$(shell echo ../tools/$(notdir $(externalJarFile)))) | sed -e 's/ /:/g')


###################################################################
#                 EXECUTABLE SCRIPT SETTINGS                      #
###################################################################

# Directory with various telescope specific subdirectories.
# Leave this variable empty unless you want to use external cfg directories.
# (I.e. installed cfg directories rather than the ones in $(LOCAL_INSTALL_ROOT)/cfg).
CFG_DIRS            =


ifeq ($(JAVA_ROOT),)
JAVA                = $(shell which java)
else
JAVA                = $(JAVA_ROOT)/bin/java
endif


JAVAHELP_CP         = ../../ORAC/tools/jhall.jar:../../ORAC/tools/jhtools.jar

# Runtime flags (java)
# These flags are currently not used. Flags are currently hard-wired in the script sources in
# orac3/OT/src/scripts
JAVA_FLAGS          = -ms5m -mx100m -oss5m

